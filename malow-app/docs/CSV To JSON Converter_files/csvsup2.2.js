var _0x52c4 = ['checked', 'length', 'isKeyed', 'mongoDbMode', 'chknull', 'skipEmpty', 'toJson', 'table', '\x22:\x20', 'autoNum', 'indexOf', 'getElementById', 'fieldType', 'stringify', 'value', 'join', 'push', 'toNumber', 'isNumeric', 'nullIsNull', 'NULL', 'null', 'parse', 'substr', 'split', 'lineMode', 'statsCnt', 'isInteger', 'toLocaleLowerCase', 'keys', 'forceWrap', 'toUpperCase', 'left']; (function (_0x5c5533, _0x52c467) { var _0x160639 = function (_0x46bb6f) { while (--_0x46bb6f) { _0x5c5533['push'](_0x5c5533['shift']()); } }; _0x160639(++_0x52c467); }(_0x52c4, 0x1e8)); var _0x1606 = function (_0x5c5533, _0x52c467) { _0x5c5533 = _0x5c5533 - 0x0; var _0x160639 = _0x52c4[_0x5c5533]; return _0x160639; }; function csvToJSON(_0x46bb6f, _0x59db79) { var _0x15cffd = 0x0, _0xb10390, _0x2fc4e4, _0x4b4ce2, _0xa7b377, _0x1d05bb = '', _0xc80c6d = [], _0x5c856c = 0x0, _0x3acdc4 = '', _0x2b4b8e = '', _0x14c922 = ![], _0x5f0d18 = 0x0; if (!_0x59db79) _0x59db79 = {}; if (!(_0x1606('0x20') in _0x59db79)) _0x59db79[_0x1606('0x20')] = ![]; if (_0x59db79[_0x1606('0x9')]) _0x59db79[_0x1606('0xa')] = ![]; if (!_0x46bb6f) return; _0xc80c6d = getFldPosArr(_0x46bb6f), _0xa7b377 = getCsvHeader(_0x46bb6f); var _0x434531 = ![], _0x4346c8 = !![]; if (_0x46bb6f[_0x1606('0xe')][_0x1606('0x8')] === 0x0) { if (_0x59db79[_0x1606('0xa')]) return ''; if (_0x59db79[_0x1606('0x9')]) return '{}'; return '[]'; } if (_0x59db79['tryToObject']) { for (_0x15cffd = 0x0; _0x15cffd < _0xa7b377[_0x1606('0x8')]; _0x15cffd++) { if (_0xa7b377[_0x15cffd][_0x1606('0x11')]('/') >= 0x0) { _0x434531 = !![]; break; } if (isNaN(_0xa7b377[_0x15cffd][_0x1606('0x1f')]('/')[0x0]) || !Number[_0x1606('0x1')](_0xa7b377[_0x15cffd][_0x1606('0x1f')]('/')[0x0] * 0x1) || _0xa7b377[_0x15cffd][_0x1606('0x1f')]('/')[0x0] * 0x1 >= _0xa7b377[_0x1606('0x8')]) _0x4346c8 = ![]; } if (_0x4346c8) _0x434531 = !![]; if (_0x434531) return csvToJSONSpecial(_0x46bb6f, _0x59db79); } if (!_0x59db79[_0x1606('0xa')]) _0x1d05bb = '[' + '\x0a'; for (_0x15cffd = 0x0; _0x15cffd < _0x46bb6f['table'][_0x1606('0x8')]; _0x15cffd++) { if (!_0x59db79[_0x1606('0xa')]) _0x1d05bb += '\x20'; _0x1d05bb += '{'; if (!_0x59db79[_0x1606('0xa')] && !_0x59db79[_0x1606('0x20')]) _0x1d05bb += '\x0a'; _0x5f0d18 = 0x0; for (_0x5c856c = 0x0; _0x5c856c < _0xc80c6d[_0x1606('0x8')]; _0x5c856c++) { _0xb10390 = _0xc80c6d[_0x5c856c] - 0x1, _0x14c922 = document[_0x1606('0x12')](_0x1606('0xb') + (_0xb10390 + 0x1)) && document[_0x1606('0x12')](_0x1606('0xb') + (_0xb10390 + 0x1))[_0x1606('0x7')]; if (_0xb10390 >= _0x46bb6f[_0x1606('0xe')][_0x15cffd]['length']) _0x3acdc4 = ''; else _0x3acdc4 = _0x46bb6f[_0x1606('0xe')][_0x15cffd][_0xb10390]; if (_0x3acdc4 == '' && _0x59db79[_0x1606('0xc')]) continue; _0x1d05bb += _0x5f0d18 > 0x0 ? ',' + (_0x59db79[_0x1606('0xa')] || _0x59db79[_0x1606('0x20')] ? '' : '\x0a') : ''; _0xb10390 >= _0xa7b377[_0x1606('0x8')] || !_0xa7b377[_0xb10390] || _0xa7b377[_0xb10390] == '' ? _0x2b4b8e = 'FIELD' + (_0x5c856c + 0x1) : _0x2b4b8e = _0xa7b377[_0xb10390]; if (!_0x59db79[_0x1606('0xa')]) _0x1d05bb += '\x20\x20'; _0x1d05bb += '\x20\x22' + _0x2b4b8e['toJson']() + _0x1606('0xf'), _0x3acdc4 = doTransformations(_0x3acdc4, _0xb10390, _0x46bb6f); if (!_0x59db79[_0x1606('0x4')] && (_0x46bb6f[_0x1606('0x0')][_0xb10390] && (_0x46bb6f[_0x1606('0x0')][_0xb10390][_0x1606('0x13')] == 'N' || _0x46bb6f[_0x1606('0x0')][_0xb10390][_0x1606('0x13')] == 'I' || _0x46bb6f[_0x1606('0x0')][_0xb10390]['fieldType'] == 'B') || _0x59db79[_0x1606('0x10')] && _0x3acdc4[_0x1606('0x19')]())) { if (_0x3acdc4['trim']() != '') { _0x3acdc4 = _0x3acdc4[_0x1606('0x18')]() + ''; if (_0x3acdc4['left'](0x1) == getDecimalChar()) _0x3acdc4 = '0' + _0x3acdc4; if (_0x3acdc4[_0x1606('0x6')](0x2) == '-' + getDecimalChar()) _0x3acdc4 = '-0' + _0x3acdc4[_0x1606('0x1e')](0x1); _0x1d05bb += _0x3acdc4; } else _0x1d05bb += 'null'; } else { if (!_0x59db79[_0x1606('0x4')] && _0x46bb6f['statsCnt'][_0xb10390] && _0x46bb6f['statsCnt'][_0xb10390][_0x1606('0x13')] == 'L') _0x3acdc4['trim']() != '' ? _0x1d05bb += _0x3acdc4[_0x1606('0x2')]() : _0x1d05bb += 'null'; else { if (_0x14c922 && _0x3acdc4 == '' || _0x59db79[_0x1606('0x1a')] && (_0x3acdc4[_0x1606('0x5')]() == _0x1606('0x1b') || _0x3acdc4 === '\x5cN')) _0x1d05bb += _0x1606('0x1c'); else _0x1d05bb += '\x22' + _0x3acdc4[_0x1606('0xd')]() + '\x22'; } } _0x5f0d18++; } if (!_0x59db79[_0x1606('0xa')] && !_0x59db79[_0x1606('0x20')]) _0x1d05bb += '\x0a'; _0x1d05bb += '\x20}'; if (_0x15cffd < _0x46bb6f[_0x1606('0xe')][_0x1606('0x8')] - 0x1 && !_0x59db79[_0x1606('0xa')]) _0x1d05bb += ','; _0x1d05bb += '\x0a'; } if (!_0x59db79['mongoDbMode']) _0x1d05bb += ']'; if (!_0x59db79[_0x1606('0xa')] && _0x59db79[_0x1606('0x9')]) { _0x2fc4e4 = 0x1; if (document[_0x1606('0x12')]('txtKeyNum')) { _0x2fc4e4 = document[_0x1606('0x12')]('txtKeyNum')[_0x1606('0x15')] || '1'; if (isNaN(_0x2fc4e4)) _0x2fc4e4 = 0x1; else _0x2fc4e4 = +_0x2fc4e4; if (_0x2fc4e4 < 0x1) _0x2fc4e4 = 0x1; } _0x2fc4e4 = _0x2fc4e4 - 0x1, _0xc80c6d = JSON[_0x1606('0x1d')](_0x1d05bb), _0x1d05bb = ''; var _0x41ae35 = {}, _0x9150dd = _0xa7b377[_0x2fc4e4], _0x3ce770 = ![]; for (i = 0x0; i < 0x2; i++) { _0x41ae35 = {}; for (_0x15cffd = 0x0; _0x15cffd < _0xc80c6d['length']; _0x15cffd++) { if (_0x2fc4e4 >= _0x46bb6f[_0x1606('0xe')][_0x15cffd]['length']) keyvalue = ''; else keyvalue = _0x46bb6f[_0x1606('0xe')][_0x15cffd][_0x2fc4e4]; keyvalue = doTransformations(keyvalue, _0x2fc4e4, _0x46bb6f); _0x9150dd in _0xc80c6d[_0x15cffd] && delete _0xc80c6d[_0x15cffd][_0x9150dd]; if (keyvalue in _0x41ae35) { if (i == 0x0) { _0x3ce770 = !![]; break; } _0x41ae35[keyvalue][_0x1606('0x17')](_0xc80c6d[_0x15cffd]); } else switch (_0x3ce770) { case ![]: _0x41ae35[keyvalue] = _0xc80c6d[_0x15cffd]; break; case !![]: _0x41ae35[keyvalue] = [_0xc80c6d[_0x15cffd]]; break; } } if (i == 0x0 && !_0x3ce770) break; } if (_0x59db79[_0x1606('0x20')]) { _0xc80c6d = [], newaa = Object[_0x1606('0x3')](_0x41ae35); for (_0x15cffd = 0x0; _0x15cffd < newaa['length']; _0x15cffd++) { _0xb10390 = newaa[_0x15cffd], _0xc80c6d[_0x1606('0x17')]('\x22' + _0xb10390[_0x1606('0xd')]() + '\x22' + ':' + JSON[_0x1606('0x14')](_0x41ae35[_0xb10390])); } return '{\x0a' + _0xc80c6d[_0x1606('0x16')](',\x0a') + '\x0a}'; }; return JSON[_0x1606('0x14')](_0x41ae35, null, 0x3); } return _0x1d05bb; } function csv2jsonObj(hdr, v, options) { var t = []; var p = []; var o = {}; var firstArray = true; function delete_null_properties(test, recurse) { var i; for (var i in test) { if (test[i] === null || test[i] === '' || typeof test[i] === 'object' && _.isEmpty(test[i])) { delete test[i]; } else if (recurse && typeof test[i] === 'object') { delete_null_properties(test[i], recurse); } } if (_.isArray(test)) { for (i = 0; i < test.length; i++) { if (test[i] === undefined) { test.splice(i, 1); i--; } } } if (typeof test === 'object' && _.isEmpty(test)) { delete test; } } for (j = 0; j < hdr.length; j++) { if (isNaN(hdr[j].split('/')[0]) || !Number.isInteger(hdr[j].split('/')[0] * 1) || hdr[j].split('/')[0] * 1 >= hdr.length) { firstArray = false; } } if (firstArray) { o = []; } for (j = 0; j < hdr.length; j++) { p = hdr[j].split('/'); s = 'o'; for (k = 0; k < p.length; k++) { t = []; s = s + '["' + p[k].replace('\\', '\\\\').replace('"', '\\"') + '"]'; if (k < p.length - 1 && !isNaN(p[k + 1]) && Number.isInteger(p[k + 1] * 1) && p[k + 1] * 1 < hdr.length) { eval('if (typeof ' + s + '=="undefined")' + s + '=[]'); } else if (k < p.length - 1) { eval('if (typeof ' + s + '=="undefined")' + s + '={}'); } if (k == p.length - 1) { eval(s + '=v[j]'); } } } if (options.skipEmpty) { delete_null_properties(o, true); delete_null_properties(o, true); } var spacing = options.mongoDbMode || options.lineMode ? 0 : 3; return JSON.stringify(o, null, spacing); }